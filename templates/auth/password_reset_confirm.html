{% extends "base.html" %}

{% block title %}Set New Password - {{ PAGE_TITLE }}{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-8">
  <div class="bg-slate-900 border border-slate-800 rounded-lg shadow-xl p-8">
    <h1 class="text-3xl font-bold text-amber-400 mb-6 text-center">Set New Password</h1>
    
    {% if validlink %}
      <p class="text-slate-300 mb-6 text-center">
        Please enter your new password twice.
      </p>
      
      {% if form.non_field_errors %}
        <div class="mb-4 p-3 bg-red-900/30 border border-red-700 rounded-lg">
          {% for error in form.non_field_errors %}
            <p class="text-red-400 text-sm">{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}
      
      <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <div>
          <label for="new_password1" class="block text-sm font-medium text-slate-300 mb-2">
            New Password
          </label>
          <input 
            type="password" 
            name="new_password1" 
            id="new_password1" 
            required
            autofocus
            value="{{ form.new_password1.value|default:'' }}"
            class="w-full px-4 py-2 bg-slate-800 border {% if form.new_password1.errors %}border-red-500{% else %}border-slate-700{% endif %} rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:border-transparent"
            placeholder="Enter new password"
            minlength="8"
          >
          {% if form.new_password1.errors %}
            {% for error in form.new_password1.errors %}
              <p class="mt-1 text-xs text-red-400">{{ error }}</p>
            {% endfor %}
          {% else %}
            <p class="mt-1 text-xs text-slate-500">At least 8 characters</p>
          {% endif %}
        </div>
        
        <div>
          <label for="new_password2" class="block text-sm font-medium text-slate-300 mb-2">
            Confirm New Password
          </label>
          <input 
            type="password" 
            name="new_password2" 
            id="new_password2" 
            required
            value="{{ form.new_password2.value|default:'' }}"
            class="w-full px-4 py-2 bg-slate-800 border {% if form.new_password2.errors %}border-red-500{% else %}border-slate-700{% endif %} rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:border-transparent"
            placeholder="Re-enter new password"
            minlength="8"
          >
          {% if form.new_password2.errors %}
            {% for error in form.new_password2.errors %}
              <p class="mt-1 text-xs text-red-400">{{ error }}</p>
            {% endfor %}
          {% endif %}
        </div>
        
        <button 
          type="submit"
          class="w-full bg-amber-400 text-slate-900 py-3 px-4 rounded-lg font-semibold hover:bg-amber-300 transition-colors duration-200"
        >
          Reset Password
        </button>
      </form>
    {% else %}
      <div class="text-center">
        <p class="text-red-400 mb-4">
          This password reset link is invalid or has expired.
        </p>
        <a 
          href="{% url 'password_reset' %}"
          class="inline-block bg-amber-400 text-slate-900 py-2 px-6 rounded-lg font-semibold hover:bg-amber-300 transition-colors duration-200"
        >
          Request New Reset Link
        </a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}

